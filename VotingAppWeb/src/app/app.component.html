
<main class="main">
  <div class="content m-5">
    <h2>Voting App</h2>
    <div class="d-flex">
      <table class="table border m-5 text-center">
        <thead>
          <tr>
            <th colspan="2">
              Voters <button class="rounded-circle float-end" data-bs-toggle="modal" data-bs-target="#addVoterCandidate" (click)="user='Voter'"> + </button>
            </th>
          </tr>
          <tr><th>Name</th><th>Has voted</th></tr>
        </thead>
        <tbody>
          <tr *ngFor="let voter of voterDetails">
            <td>{{voter.name}}</td>
            <td>{{voter.hasVoted ? 'Yes' : 'No'}}</td>
          </tr>
        </tbody>
      </table>

      <table class="table border m-5 text-center">
        <thead>
          <tr>
            <th colspan="2">
              Candidates <button class="rounded-circle float-end" data-bs-toggle="modal" data-bs-target="#addVoterCandidate" (click)="user='Candidate'">
                +
              </button>
            </th>
          </tr>
          <tr><th>Name</th><th>Votes</th></tr>
        </thead>
        <tbody>
          <tr *ngFor="let candidate of candidateDeatils">
            <td>{{candidate.name}}</td>
            <td>{{candidate.votes}}</td>
          </tr>
        </tbody>
      </table>
    </div><hr />

    <div>
      <h2>Vote!</h2>
      <div class="d-flex">
        <select [(ngModel)]="selectedVoterId" class="form-select w-25 mx-3">
          <option value="-1" disabled selected>I am</option>
          <option *ngFor="let voter of voterDetails" [value]="voter.voterId">
            {{ voter.name }}
          </option>
        </select>
        <select [(ngModel)]="selectedCandidateId" class="form-select w-25 mx-3">
          <option value="-1" disabled selected>I vote for</option>
          <option *ngFor="let candidate of candidateDeatils" [value]="candidate.id">
            {{ candidate.name }}
          </option>
        </select>
        <button (click)="castVote()" class="form-control w-25 btn btn-primary">Submit!</button>
      </div>
    </div>
  </div>
</main>

<!-- Modal -->
<div class="modal fade" id="addVoterCandidate" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Add {{user}}</h5>
        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form>
          <p>Enter Name</p>
          <input type="text" [(ngModel)]="addUserName" name="addUserName" />
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" (click)="addUser()" data-bs-dismiss="modal">Save changes</button>
      </div>
    </div>
  </div>
</div>


<router-outlet></router-outlet>
